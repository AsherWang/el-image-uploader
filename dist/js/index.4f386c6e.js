(function(e){function t(t){for(var n,o,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)o=s[p],r[o]&&d.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,s=1;s<i.length;s++){var l=i[s];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var n={},r={index:0},a=[];function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/el-image-uploader/dist/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("a1ec")},"00a4":function(e,t,i){"use strict";var n=i("0f76"),r=i.n(n);r.a},"0f76":function(e,t,i){},a1ec:function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),r=i("5c96"),a=i.n(r),o=(i("0fae"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"container"},[i("div",{staticClass:"title"},[e._v("el-image-uploader")]),i("el-form",{ref:"form",attrs:{"label-position":"left",model:e.form,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{prop:"img1",label:"img1"}},[i("el-image-uploader",{attrs:{fileSizeRestrict:e.fileSizeRestrict,sizeRestrict:e.sizeRestrict,uploadAPI:e.uploadAPI},model:{value:e.form.img1,callback:function(t){e.$set(e.form,"img1",t)},expression:"form.img1"}})],1),i("el-form-item",{attrs:{prop:"img2",label:"img2"}},[i("el-image-uploader",{attrs:{sizeRestrict:e.sizeRestrict,acceptType:["png","jpg","jpeg"],uploadAPI:e.uploadAPI},model:{value:e.form.img2,callback:function(t){e.$set(e.form,"img2",t)},expression:"form.img2"}})],1)],1)],1)])}),s=[],l=(i("7f7f"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{attrs:{drag:"",action:"nouse","show-file-list":!1,"before-upload":e.checkPicFile,"http-request":e.uploadPic,accept:e.acceptTypes.join(",")}},[i("div",{staticStyle:{position:"relative"}},[i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],staticClass:"uploading-label"},[e._v("\n          uploading\n        ")])])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.picUploaded,expression:"picUploaded"}],staticStyle:{width:"100%"}},[i("div",{staticClass:"el-upload__text"},[e._v(e._s(e.prompts.change))]),i("div",{staticClass:"preview-container",class:e.previewContainerClass},[i("img",{attrs:{src:e.shownPicUrl,alt:""}})]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},domProps:{innerHTML:e._s(e.uploadTips)},slot:"tip"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.picUploaded,expression:"!picUploaded"}],staticStyle:{width:"100%"}},[i("div",{staticClass:"el-upload__text"},[e._v(e._s(e.prompts.upload))]),i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},domProps:{innerHTML:e._s(e.uploadTips)},slot:"tip"})])])}),c=[],u=(i("456d"),i("ac6a"),i("6762"),i("2fdb"),i("f6f4")),p={name:"ElImageUploader",validator:function(e,t,i){return t&&t.errMsg?i(new Error(t.errMsg)):i()},mixins:[u["a"]],props:{value:"",uploadAPI:Function,name:{type:String,default:"pic"},data:Object,acceptType:{type:Array,default:function(){return["png","jpg","jpeg","bmp","gif"]}},fileSizeRestrict:Object,sizeRestrict:Object,previewContainerClass:{type:String,default:""},validateEvent:{type:Boolean,default:!0},prompts:{type:Object,default:function(){return{upload:"将文件拖到此处，或点击上传",change:"将文件拖到此处，或点击更换"}}},wrongTypeHint:{type:String,default:"图片格式错误"}},data:function(){return{imgUrl:this.value,uploading:!1}},computed:{acceptTypes:function(){return this.acceptType.map(function(e){return"image/".concat(e)})},picUploaded:function(){return this.imgUrl&&""!==this.imgUrl},shownPicUrl:function(){return this.imgUrl},uploadTips:function(){var e=[this.acceptType.join("/")];return this.fileSizeRestrict&&this.fileSizeRestrict.hint&&e.push(this.fileSizeRestrict.hint),this.sizeRestrict&&this.sizeRestrict.hint&&e.push(this.sizeRestrict.hint),e.join(", ")}},methods:{emitMsg:function(e,t){["change"].includes(e)&&(this.$emit("input",t),t&&t.errMsg&&(this.imgUrl=""),this.validateEvent&&this.dispatch("ElFormItem","el.form.".concat(e),[t]))},checkPicFile:function(e){var t=this;return new Promise(function(i,n){var r=t.acceptTypes.includes(e.type);if(!r)return t.emitMsg("change",{errMsg:t.wrongTypeHint}),console.log("wrongTypeHint",t.wrongTypeHint),n();if(t.fileSizeRestrict){var a=t.fileSizeRestrict.fn(e.size);if(a)return t.emitMsg("change",{errMsg:a}),n()}var o=new Image;o.src=window.URL.createObjectURL(e),o.onload=function(){if(t.sizeRestrict){var e=t.sizeRestrict.fn({width:o.width,height:o.height});if(e)return t.emitMsg("change",{errMsg:e}),n()}return t.emitMsg("change"),i()},o.onerror=function(){n()}})},uploadPic:function(e){var t=this,i=new FormData;i.append(this.name,e.file),this.data&&Object.keys.forEach(function(e){t.data[e]!==Function&&i.append(e,t.data[e])}),this.uploading=!0,this.uploadAPI(i).then(function(e){t.imgUrl=e,t.emitMsg("change",e),t.uploading=!1}).catch(function(){t.uploading=!1})}}},d=p,f=(i("00a4"),i("2877")),g=Object(f["a"])(d,l,c,!1,null,"b6afe2e0",null),m=g.exports;m.install=function(e){e.component(m.name,m)};var h=m,v={name:"app",components:{ElImageUploader:h},data:function(){return{form:{img1:"",img2:"https://via.placeholder.com/200x150"},rules:{img1:[{validator:h.validator,trigger:"change"}],img2:[{validator:h.validator,trigger:"change"}]},fileSizeRestrict:{hint:"不要大于30M",fn:function(e){return e>31457280?"不可以大于30M":""}},sizeRestrict:{hint:"尺寸限制在400x500",fn:function(e){return e.width>400?"宽度不可以大于400":e.height>500?"高度不可以大于500":""}}}},methods:{uploadAPI:function(e){return console.log("data in request",e),Promise.resolve("https://via.placeholder.com/300x150")}}},w=v,b=(i("d7fb"),Object(f["a"])(w,o,s,!1,null,null,null)),y=b.exports;n["default"].use(a.a),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(y)}}).$mount("#app")},d7fb:function(e,t,i){"use strict";var n=i("fd12"),r=i.n(n);r.a},fd12:function(e,t,i){}});
//# sourceMappingURL=index.4f386c6e.js.map